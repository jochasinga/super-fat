<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Super-fat: Furby Chat Client by jochasinga</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/jochasinga/super-fat">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Super-fat: Furby Chat Client</h1>
            <h2>Super Fat is a physical &quot;fat&quot; interactive client baked into an old Furby toy</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/jochasinga/super-fat/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/jochasinga/super-fat/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>
<a name="super-fat-furby-chat-client" class="anchor" href="#super-fat-furby-chat-client"><span class="octicon octicon-link"></span></a>Super Fat: Furby Chat Client</h1>

<p>This repository is dedicated to the code for "Super Fat" Toy Project to be presented and exhibited at the Makerfaire NY on September 20-21, 2014. Contributions are super-appreciated and contributors will definitely be mentioned.</p>

<h2>
<a name="project-description" class="anchor" href="#project-description"><span class="octicon octicon-link"></span></a>Project Description</h2>

<p><em>Super Fat</em> is an speculative attempt to treat a toy object as a "fat" web chat client as opposed to the "thin" web client in the usual MVC paradigm. By being "fat" it simply means that more computing is moved into the client from the server or cloud, and by being "super fat" is actually making that computing physical.</p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>
<a href="http://nodejs.org">Node.js</a> and <a href="http://socket.io">Socket.io</a>
</li>
<li>
<a href="https://firebase.com" title="Firebase">Firebase</a> for pushing and retrieving data remotely</li>
<li>
<a href="http://arduino.cc/" title="Arduino">Arduino</a> for the toy's main microcontroller</li>
<li>
<a href="http://www.sparqee.com/portfolio/sparqee-cell/" title="Sparqee Cellv1.0">Cellv1.0</a> for 3G communication</li>
</ul><h2>
<a name="instructions" class="anchor" href="#instructions"><span class="octicon octicon-link"></span></a>Instructions</h2>

<h3>
<a name="starting-chat-app" class="anchor" href="#starting-chat-app"><span class="octicon octicon-link"></span></a>Starting Chat App</h3>

<p>Install <a href="http://nodejs.org/" title="Node.js">Node.js</a>, which should come with <a href="https://www.npmjs.org/" title="NPM">Node Package Manager</a>. Please install globally so you both <code>chatapp-socket.io</code> and <code>toy</code> can see it.</p>

<ol>
<li>
<code>cd chatapp-socket.io</code> </li>
<li>
<code>npm install</code> all dependencies from <code>package.json</code> </li>
<li>run <code>node index.js</code>. The chat app should be on <code>http://localhost:8000</code>
</li>
</ol><h4>
<a name="retrieving-remote-data" class="anchor" href="#retrieving-remote-data"><span class="octicon octicon-link"></span></a>Retrieving Remote Data</h4>

<p>After running <code>node index.js</code>, from another terminal, run</p>

<div class="highlight highlight-bash"><pre>curl https://blistering-inferno-6120.firebaseio.com/chatters.json
</pre></div>

<p>You should get back a JSON file containing the test users and messages on the server.</p>

<h3>
<a name="toy-circuit" class="anchor" href="#toy-circuit"><span class="octicon octicon-link"></span></a>Toy Circuit</h3>

<h4>
<a name="requirements-1" class="anchor" href="#requirements-1"><span class="octicon octicon-link"></span></a>Requirements</h4>

<p>On the hardware side, we'll decidedly used </p>

<ul>
<li>
<a href="http://www.sparqee.com/portfolio/sparqee-cell/">Cellv1.0</a> for super-easy setup</li>
<li>
<a href="http://www.sparqee.com/portfolio/sparqee-shielda/">Cellv1.0 Arduino Shield</a> for no-brainer arduino integration with the above</li>
<li>
<a href="http://microcontrollershop.com/product_info.php?products_id=6008">Internal 4G/3G/GSM Strip Antenna</a> which should be small enough to incorporate into the toy</li>
<li>
<a href="http://www.parallax.com/product/30016" title="EMIC 2">EMIC 2</a> from Parallax for text-to-speech capability to read the stream from the chat client. A bit costly but the features are rich and there are only so many pins!</li>
</ul><p>Below is a rough sketch of what might be included. </p>

<p><a href="http://i.imgur.com/1Png31G.jpg">Imgur</a></p>

<h4>
<a name="retrieving-remote-data-1" class="anchor" href="#retrieving-remote-data-1"><span class="octicon octicon-link"></span></a>Retrieving Remote Data</h4>

<p><strong>Upload Firmata and Node Dependencies</strong></p>

<p>Johny-five relies on Firmata library, so...</p>

<ol>
<li>cd into <code>toy/</code>, open up <code>StandardFirmata.ino</code> with the Arduino IDE.</li>
<li>Connect your arduino board, select the right board and serial port.</li>
<li>Upload the code onto the board. Upon success, close the IDE. Firmata is successfully uploaded.</li>
<li>
<code>cd toy/example</code> and install dependencies <code>npm install</code>. This will install Firebase and Johny-five. </li>
</ol><p>Now the arduino is ready for the following</p>

<p><strong>The (Furby) motor:</strong></p>

<ol>
<li>
<code>cd toy/img/motor</code> and use the diagram to connect a simple motor circuit.</li>
<li>
<code>cd toy/example</code> and run <code>node motor.js</code>
</li>
</ol><p>Now, when you log into the chat client on port 8000, the motor will fire for every new message you type.</p>

<p><strong>The (Furby's tummy) push button:</strong></p>

<p>Furby's tummy button is simple SPST, Normally-open type. The same code can be used with the back button too.</p>

<ol>
<li>
<code>cd toy/img/button</code> and use the diagram to connect a simple button circuit.</li>
<li>
<code>cd toy/example</code> and run <code>node button.js</code>
</li>
</ol><p>When button is pressed, the chat room should be "hijacked" with a username "Furby" and message "GIGGGLE!"
Now the code will still push every new instance of Furby chatter to the Firebase list instead of updating its message for the second time on.</p>

<p><strong>The Microphone:</strong></p>

<ol>
<li>
<code>cd toy/img/microphone</code> and use the diagram to connect a simple electret microphone on the breadboard.</li>
<li>
<code>cd toy/example</code> and run <code>node microphone.js</code>
</li>
</ol><p>I have commented out the Firebase push code for microphone, since it will need some work to calibrate properly and not pushing data to the server every time it detects the slightest sound.</p>

<hr><h2>
<a name="updates--progress" class="anchor" href="#updates--progress"><span class="octicon octicon-link"></span></a>Updates &amp; Progress</h2>

<p><strong>09/04/14:</strong>
Just created simple data syncing with the Furby's motor and push button. The chat app is a bit hacked and broken, so I'll get into it today. Things like welcome message and numUsers can be omitted for simplicity (less things to break). <a href="https://github.com/palaa159" title="Apon">palaa159</a>suggested <a href="http://spark.io/" title="Spark board">Spark.io</a> instead of the arduino. It is so small, arduino-like and comes with its own RESTful cloud. We'll see tomorrow if it's painful to transfer.</p>

<p><strong>09/03/14:</strong>
17 More days to go! I tested some example codes for <a href="https://github.com/rwaldron/johnny-five" title="Johny-five">Johny-five</a> from <a href="https://github.com/AnnaGerber/node-ardx" title="Nodebot Experimenter Kit">Anna Gerber's repo</a> and I was pleased to learn that it's very simple to get data change from <strong>Firebase</strong> to trigger the arduino in real-time! I was running the chat client from <em>port 8000</em> and a piezo code on <em>port 3000</em> and with every chat message it sang.</p>

<p><strong>09/01/14:</strong>
I've spent some time last night trying to figure out a rough sketch of how the components might fit together (since they're still not delivered due to long weekend). Please check the <strong>instruction</strong> section for the diagram and components.
I also checked out <a href="https://www.firebase.com/" title="Firebase">Firebase</a> which has a supremely simple set of APIs for getting and setting JSON datas in real-time on its storage. Perhaps that can be a good mediator on the web.
Happy Labor Day!</p>

<p><strong>08/31/14:</strong>
I decided to redo a much simpler chat client with Socket.io. Since next week it'll be more on the hardware side, so I decide it's the best not to look back to Meteor.js. 
Some caveats that need fixings are:</p>

<ul>
<li>Inresponsiveness of the chatbox on horizontal browser resize.</li>
<li>When run on <code>localhost:3000</code>, only one user is allowed to logged in. Once I logged in from another browser (or another tab) on the same computer, my last session just logged out.
The idea is to stream the messages from the chat through the server and broadcast to other clients, including the arduino-powered Furby without the need for a persistent database (is it possible?!)
<a href="https://github.com/crazcalm" title="crazcalm">Marcus Willock</a> and I had a look at <a href="https://github.com/rwaldron/johnny-five" title="Johny-five">Johny-five</a> Javascript-arduino library for Nodebots. Will look into it more.</li>
</ul><p><strong>08/29/14:</strong>
The chat app is done (pretty) much. Plan is to get rid of all the routes and make it single-paged with the chat box right on the home page for easy demo. I have  done some studies on Meteor's DDP (Distributed Data Protocol). It's simple JSON I/O. Wonder if that could be easy enough to communicate with the Arduino.</p>

<p><strong>08/28/14:</strong>
After two days catching up, I decided to leave <strong>Famo.us</strong> out of this project unless there's time left to implement it to other mobile devices. It's a shame but the chat client is just a part of this project, and the most important thing is the <em>proof of concept</em> and MVP.</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/jochasinga">jochasinga</a> can be found on <a href="https://github.com/jochasinga/super-fat">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
